# arXiv API Client in C#

This C# application demonstrates how to:
1. Call the arXiv API to retrieve paper information
2. Download the PDF file
3. Load it into a MemoryStream for in-memory processing

## Features

- **ArxivApiClient**: Main client class for interacting with arXiv
- **GetPaperInfoAsync()**: Retrieves paper metadata (title, authors, abstract, etc.)
- **DownloadPdfToMemoryStreamAsync()**: Downloads PDF to a MemoryStream
- **GetPaperWithPdfAsync()**: Combined method for both operations

## How It Works

### 1. Calling the arXiv API

The arXiv API is accessed via HTTP GET requests to:
```
http://export.arxiv.org/api/query?id_list={arxiv_id}
```

The API returns XML in the Atom feed format. We parse it using LINQ to XML:

```csharp
XDocument doc = XDocument.Parse(xmlContent);
XNamespace ns = "http://www.w3.org/2005/Atom";
var entry = doc.Descendants(ns + "entry").FirstOrDefault();
```

### 2. Downloading the PDF

Once we have the PDF URL from the API response, we use HttpClient to download it:

```csharp
HttpResponseMessage response = await httpClient.GetAsync(pdfUrl);
byte[] pdfBytes = await response.Content.ReadAsByteArrayAsync();
MemoryStream memoryStream = new MemoryStream(pdfBytes);
```

### 3. Working with MemoryStream

The MemoryStream allows you to:
- Process the PDF in memory without disk I/O
- Pass it to PDF libraries (like iTextSharp, PdfSharp)
- Reset position and read multiple times
- Convert to byte array if needed

## Usage Examples

### Basic Usage

```csharp
var client = new ArxivApiClient();

// Get paper info by arXiv ID
var paper = await client.GetPaperInfoAsync("1706.03762");
Console.WriteLine($"Title: {paper.Title}");

// Download PDF to memory
using (MemoryStream pdfStream = await client.DownloadPdfToMemoryStreamAsync(paper.PdfUrl))
{
    // Work with the PDF in memory
    Console.WriteLine($"PDF size: {pdfStream.Length} bytes");
    
    // You can now:
    // - Pass to a PDF library
    // - Save to disk
    // - Process the content
    // - Send over network
}
```

### Combined Call

```csharp
var (paper, pdfStream) = await client.GetPaperWithPdfAsync("1706.03762");
Console.WriteLine($"Downloaded: {paper.Title}");
// Remember to dispose the stream
pdfStream.Dispose();
```

### Save to Disk (Optional)

```csharp
using (MemoryStream pdfStream = await client.DownloadPdfToMemoryStreamAsync(pdfUrl))
{
    pdfStream.Position = 0; // Reset to beginning
    using (FileStream fileStream = File.Create("output.pdf"))
    {
        await pdfStream.CopyToAsync(fileStream);
    }
}
```

## Running the Code

### Requirements
- .NET 6.0 or higher (or .NET Core 3.1+)
- Internet connection for arXiv API access

### Build and Run

```bash
dotnet build
dotnet run
```

## arXiv ID Formats

The code accepts various arXiv ID formats:
- New format: `1706.03762`, `2103.15348`
- Old format: `cs/0001234`, `math/0309136`
- With version: `1706.03762v1` (version is stripped automatically)
- With prefix: `arXiv:1706.03762` (prefix is removed automatically)

## API Response Structure

The arXiv API returns XML in Atom format with the following structure:

```xml
<feed xmlns="http://www.w3.org/2005/Atom">
  <entry>
    <id>http://arxiv.org/abs/1706.03762v7</id>
    <title>Attention Is All You Need</title>
    <summary>The dominant sequence transduction models...</summary>
    <published>2017-06-12T17:57:34Z</published>
    <author><name>Ashish Vaswani</name></author>
    <link href="http://arxiv.org/pdf/1706.03762v7" title="pdf"/>
  </entry>
</feed>
```

## Common Use Cases

1. **PDF Text Extraction**: Pass the MemoryStream to a PDF library
2. **Metadata Collection**: Build a database of paper information
3. **Batch Processing**: Download multiple papers programmatically
4. **Research Tools**: Create custom paper management applications
5. **Archive Creation**: Download and organize papers automatically

## Error Handling

The code includes error handling for:
- Network failures
- Invalid arXiv IDs
- API unavailability
- PDF download failures

## Notes

- The HttpClient is static and reused for better performance
- MemoryStreams should be disposed when finished
- The arXiv API has rate limits (avoid hammering the server)
- PDF URLs use HTTP (not HTTPS) by default from arXiv

## Example Papers to Try

- `1706.03762` - "Attention Is All You Need" (Transformers paper)
- `1301.3781` - "Efficient Estimation of Word Representations" (Word2Vec)
- `1810.04805` - "BERT: Pre-training of Deep Bidirectional Transformers"
- `2005.14165` - "GPT-3: Language Models are Few-Shot Learners"

## License

This code is provided as-is for educational purposes.

** Generated by Claude **
